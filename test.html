<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <title>OTP Verification</title>
</head>
<body>

<div class="container mt-5">
    <h2>OTP Verification</h2>
    <button class="btn btn-primary" id="requestOtpButton">Request OTP</button>
    
    <!-- OTP Modal -->
    <div class="modal fade" id="otpModal" tabindex="-1" aria-labelledby="otpModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="otpModalLabel">Enter OTP</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="otpInput">OTP</label>
                        <input type="text" class="form-control" id="otpInput" placeholder="Enter OTP" maxlength="6">
                        <small id="errorMessage" class="text-danger" style="display: none;"></small>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="verifyButton">Verify</button>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="assets/js/bootstrap.bundle.min.js"></script>
<script>
    const apiBaseUrl = 'https://your-api-url.com'; // Replace with your actual API URL

    // Request OTP
    document.getElementById('requestOtpButton').addEventListener('click', function() {
        // Make an API call to request an OTP
        fetch(`${apiBaseUrl}/request-otp`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ email: 'user@example.com' }) // Replace with user's email/phone
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                alert('OTP sent successfully!');
                $('#otpModal').modal('show'); // Show the modal to enter OTP
            } else {
                alert('Error requesting OTP: ' + data.message);
            }
        })
        .catch(error => console.error('Error:', error));
    });

    // Verify OTP
    document.getElementById('verifyButton').addEventListener('click', function() {
        const otpInput = document.getElementById('otpInput').value;
        const errorMessage = document.getElementById('errorMessage');

        fetch(`${apiBaseUrl}/verify-otp`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ otp: otpInput }) // Send the OTP entered by the user
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                alert('OTP verified successfully!');
                $('#otpModal').modal('hide'); // Close the modal
            } else {
                errorMessage.style.display = 'block';
                errorMessage.textContent = 'Invalid OTP. Please try again.';
            }
        })
        .catch(error => console.error('Error:', error));
    });
</script>

</body>
</html>
